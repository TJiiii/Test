<!DOCTYPE html>
<html>

<head>
      <meta charset="utf-8">
    <title>회원 가입 페이지</title>
    <script type="text/javascript">
      function result() {
        /*
        아이디, 패스워드, 패스워드 확인, 메일, 주민번호등
        아이디는 4~12 자리 영숫자, 패스워드 동일
        메일은 영숫자@영숫자@영어3
        주민번호는 readme 의 주민번호 공식처럼.
        */
        var id = document.getElementById("id");
        var pw = document.getElementById("pw");
        var pw_re = document.getElementById("pw_re");
        var mail = document.getElementById("mail");
        var socialnum = document.getElementById("socialnum");

        /*
        일단 값을 제대로 받아왔는지도 모르겠다 이렇게 하면 된건가 아닌건가..
        */

        var id_p = /[\w]{4,}/gi;
        var pw_p = /[\w]{4,}/gi;
        var mail_p =  /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}$/i;
        var socialnum_p = /^(?:[0-9]{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[1,2][0-9]|3[0,1]))-[1-4][0-9]{6}$/;
        //각 텍스트를 확인할 정규표현식등, 아이디와 패스워드는 문제없을거라 예상
        var id_p = /[A-Za-z0-9]{4,}/gi;
        var pw_p = /[A-Za-z0-9]{4,}/gi;
        //제대로 쓴진 모르겠지만 아마 메일도 문제없을듯
        var mail_p = /\w\@[A-Za-z0-9]\.[A-Za-z0-9]/;
        //주민번호 확인 알고리즘을 적용하지 않음, 일단 숫자 6자리와 - 를 포함한 7자리 숫자만 받도록
        var socialnum_p = /[0-9]{6}-[0-9]{7}/;

        //확인을 했지만 그냥 무조건 true , id 가 그냥 object 라서 그런건가?
        if(!(id_p.test(id.value))){
          //id 확인식, 제대로 작동은 안하지만
          //필요한 기능은 id 가 조건에 맞지않을 경우 오류창 띄우고 리턴.
          alert("id 는 영숫자 4자리 이상 입력해주세요");
          document.getElementById("id").value = "";
          return false;
        }
        if(id.value == pw.value){
          alert("id 와 pw 가 일치합니다. 다시입력해주세요");
          document.getElementById("pw").value = "";
          document.getElementById("pw_p").value = "";
          return false;
        }
        if(!(pw_p.test(pw.value))){
          //패스워드 확인식, 마찬가지로 확인 이상점검
          alert("pw 는 영숫자 4자리 이상 입력해주세요");
          document.getElementById("pw").value = "";
          if(pw_p.test(pw_re.value)){
            //패스워드 재입력 확인
            alert("pw 확인은 영숫자 4자리 이상 입력해주세요");
            document.getElementById("pw_p").value = "";
            return false;
          }
          return false;
        }
        if(pw.value != pw_re.value){
          alert("패스워드가 일치하지 않습니다.");
          document.getElementById("pw").value = "";
          document.getElementById("pw_p").value = "";
          return false;
        }

        if(!(mail_p.test(mail.value))){
          //메일점검
          alert("이메일을 잘못 입력했습니다");
          document.getElementById("mail").value = "";
          return false;
        }s
        if(document.getElementById("name").value == ""){
          alert("이름을 입력해주세요");
          return false;
        }

        if(!(socialnum_p.test(socialnum.value))){
          //주민번호 점검
          alert("주민번호를 잘못 입력했습니다");
        //  document.getElementById("socialnum").value = "";
          return false;
        }
        var check = 11-(((parseInt(socialnum.value[0]*2))+(parseInt(socialnum.value[1]*3))+(parseInt(socialnum.value[2]*4))+
        (parseInt(socialnum.value[3]*5))+(parseInt(socialnum.value[4]*6))+(parseInt(socialnum.value[5]*7))+
        (parseInt(socialnum.value[7]*8))+(parseInt(socialnum.value[8]*9))+(parseInt(socialnum.value[9]*2))+
        (parseInt(socialnum.value[10]*3))+(parseInt(socialnum.value[11]*4))+(parseInt(socialnum.value[12]*5)))%11);

        if(check == 10){
          check = 0;
        } else if (check == 11){
          check = 1;
        }

        if(parseInt(check) == (parseInt(socialnum.value[13]))){
          alert("가입되었습니다");
          return true;
        } else {
          alert("존재 하지 않는 주민번호입니다.");
          return false;
        }

      }
    </script>
</head>

  <center>
<form method="get">
<table width="700" height="400" border="1" cellspacing="0" >
  <tr bgcolor=#0080ff>
    <td colspan="3" align="center">회원 기본 정보</td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>아이디 : </td>
    <td colspan="2"><input type="text" id="id" size="12" maxlength="12"> 4~12자의 영문 대소문자와 숫자로만 입력</td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>비밀번호 : </td>
    <td colspan="2"><input type="password" id="pw" size="12" maxlength="12"> 4~12자의 영문 대소문자와 숫자로만 입력</td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>비밀번호확인 : </td>
    <td colspan="2"><input type="password" id="pw_re" size="12" maxlength="12"></td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>메일주소 : </td>
    <td colspan="2"><input type="text" id="mail" size="20" maxlength="20"> 예)id@domain.com</td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>이름 : </td>
    <td colspan="2"><input type="text" id="name" size="20" maxlength="20"></td>
  </tr>
  <tr bgcolor=#0080ff>
    <td colspan="3" align="center">개인 신상 정보</td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>주민등록번호 : </td>
    <td colspan="2"><input type="text" id="socialnum" size="20" maxlength="20"> 예) 123456-7893452</td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>생일 : </td>
    <td colspan="2"><input type="text" id="birth_year" size="4" maxlength="4">년
      <select name="month">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>년
      <select name="day">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
      </select>일
    </td>
  </tr>
  <tr>
    <td align="center" bgcolor=#aaaaaa>관심분야 : </td>
    <td colspan="2">
      <input type="checkbox" name="interact" value="computer">컴퓨터
      <input type="checkbox" name="interact" value="internet">인터넷
      <input type="checkbox" name="interact" value="travel">여행
      <input type="checkbox" name="interact" value="movie">영화감상
      <input type="checkbox" name="interact" value="music">음악감상
    </td>
  </tr>
  <tr>
    <td align="center" rowspan="3" bgcolor=#aaaaaa>자기소개 : </td>
    <td colspan="2"><textarea name="introduce" cols="80" rows="7"></textarea></td>
  </tr>

</table>
<p>
<input type="button" onclick="result()" value="회원 가입">
<input type="reset" value="다시 입력">
</p>
</form>
</center>
</body>

</html>
